<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>إضافة نظام التصحيح</title>
  <style>
    :root {
      color-scheme: light dark;
      --bg: #0f172a;
      --panel: #1e293b;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.08);
      --text: #e2e8f0;
      --text-muted: #94a3b8;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Tajawal", "Segoe UI", sans-serif;
    }

    body {
      background: radial-gradient(circle at top, rgba(56, 189, 248, 0.1), transparent 55%), var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 32px;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
    }

    header h1 {
      font-size: 32px;
    }

    .nav-link {
      padding: 10px 18px;
      border-radius: 999px;
      background: rgba(56, 189, 248, 0.12);
      color: var(--accent);
      border: 1px solid rgba(56, 189, 248, 0.4);
      font-size: 15px;
      text-decoration: none;
      transition: all 0.2s ease;
    }

    .nav-link:hover {
      background: rgba(56, 189, 248, 0.22);
    }

    main {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 24px;
    }

    .panel {
      background: linear-gradient(160deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.95));
      border: 1px solid rgba(148, 163, 184, 0.12);
      border-radius: 20px;
      padding: 24px;
      display: grid;
      gap: 24px;
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.45);
      backdrop-filter: blur(16px);
    }

    .panel h2 {
      font-size: 20px;
      color: var(--accent);
    }

    .system-header h1 {
      font-size: 28px;
    }

    .system-header p {
      color: var(--text-muted);
      line-height: 1.6;
      font-size: 16px;
    }

    .grade-range {
      display: grid;
      gap: 16px;
    }

    .grade-range h2 {
      font-size: 18px;
      color: var(--accent);
    }

    .grade-box {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      border-radius: 14px;
      background: var(--accent-soft);
      border: 1px solid rgba(56, 189, 248, 0.18);
    }

    .grade-box span {
      font-size: 24px;
      font-weight: 700;
      color: var(--accent);
    }

    .panel-section {
      display: grid;
      gap: 16px;
    }

    .features-list {
      display: grid;
      gap: 16px;
    }

    .feature-card {
      padding: 16px;
      border-radius: 16px;
      border: 1px solid rgba(148, 163, 184, 0.14);
      background: rgba(15, 23, 42, 0.6);
      display: grid;
      gap: 12px;
    }

    .feature-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 18px;
      font-weight: 600;
    }

    .feature-body {
      color: var(--text-muted);
      line-height: 1.6;
      font-size: 15px;
    }

    .feature-footer {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .pill {
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 14px;
      font-weight: 500;
    }

    .pill.bonus {
      background: rgba(34, 197, 94, 0.12);
      color: #22c55e;
      border: 1px solid rgba(34, 197, 94, 0.3);
    }

    .pill.penalty {
      background: rgba(239, 68, 68, 0.12);
      color: #ef4444;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .form-panel {
      align-content: start;
    }

    .form {
      display: grid;
      gap: 20px;
    }

    .form-grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    .form-group {
      display: grid;
      gap: 8px;
    }

    label {
      font-size: 14px;
      color: var(--text-muted);
    }

    input[type="text"],
    input[type="number"],
    textarea {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.2);
      background: rgba(15, 23, 42, 0.6);
      color: var(--text);
      font-size: 15px;
    }

    textarea {
      resize: vertical;
      min-height: 120px;
    }

    .feature-builder {
      display: grid;
      gap: 16px;
      padding: 18px;
      border-radius: 18px;
      background: rgba(15, 23, 42, 0.5);
      border: 1px solid rgba(148, 163, 184, 0.18);
    }

    .feature-builder-header {
      display: grid;
      gap: 8px;
    }

    .feature-builder-header h3 {
      font-size: 18px;
      color: var(--accent);
    }

    .feature-builder-header p {
      color: var(--text-muted);
      font-size: 14px;
    }

    .feature-inputs {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
    }

    .builder-actions {
      display: flex;
      justify-content: flex-start;
    }

    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      flex-wrap: wrap;
    }

    .primary-button,
    .secondary-button,
    .chip-remove {
      padding: 12px 18px;
      border-radius: 12px;
      font-size: 15px;
      border: 1px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .primary-button {
      background: var(--accent);
      color: #0f172a;
      font-weight: 600;
      border-color: var(--accent);
    }

    .primary-button:hover {
      filter: brightness(1.1);
    }

    .primary-button.ghost {
      background: rgba(56, 189, 248, 0.18);
      color: var(--accent);
      border-color: rgba(56, 189, 248, 0.5);
    }

    .primary-button.ghost:hover {
      background: rgba(56, 189, 248, 0.28);
    }

    .secondary-button {
      background: transparent;
      color: var(--text-muted);
      border-color: rgba(148, 163, 184, 0.4);
    }

    .secondary-button:hover {
      border-color: rgba(148, 163, 184, 0.6);
      color: var(--text);
    }

    .feature-queue {
      display: grid;
      gap: 12px;
    }

    .feature-chip {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.16);
      background: rgba(15, 23, 42, 0.45);
      flex-wrap: wrap;
    }

    .chip-info {
      display: grid;
      gap: 4px;
      min-width: 200px;
    }

    .chip-info strong {
      font-size: 16px;
      color: var(--text);
    }

    .chip-info span {
      font-size: 14px;
      color: var(--text-muted);
    }

    .chip-actions {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .chip-remove {
      padding: 8px 14px;
      background: rgba(239, 68, 68, 0.18);
      color: #ef4444;
      border-color: rgba(239, 68, 68, 0.4);
      font-size: 14px;
    }

    .chip-remove:hover {
      background: rgba(239, 68, 68, 0.28);
    }

    .empty-state {
      padding: 16px;
      border-radius: 14px;
      border: 1px dashed rgba(148, 163, 184, 0.3);
      color: var(--text-muted);
      text-align: center;
      font-size: 14px;
    }

    .muted {
      color: var(--text-muted);
    }

    @media (max-width: 768px) {
      body {
        padding: 20px;
      }

      header {
        flex-direction: column;
        align-items: flex-start;
      }

      header h1 {
        font-size: 26px;
      }

      .form-actions {
        justify-content: flex-start;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>إضافة نظام التصحيح</h1>
    <a class="nav-link" href="competitors.html">صفحة المتسابقين</a>
  </header>
  <main>
    <section class="panel form-panel">
      <h2>إنشاء نظام جديد</h2>
      <form id="systemForm" class="form">
        <div class="form-grid">
          <div class="form-group">
            <label for="systemNameInput">اسم النظام</label>
            <input type="text" id="systemNameInput" placeholder="أدخل اسم النظام" required>
          </div>
          <div class="form-group">
            <label for="systemFeatureInput">ميزة النظام</label>
            <input type="text" id="systemFeatureInput" placeholder="أبرز ميزة في النظام">
          </div>
          <div class="form-group">
            <label for="systemGradeInput">الدرجة العظمى</label>
            <input type="number" id="systemGradeInput" min="0" placeholder="100">
          </div>
        </div>
        <div class="form-group">
          <label for="systemDescriptionInput">وصف النظام</label>
          <textarea id="systemDescriptionInput" rows="4" placeholder="اشرح طريقة عمل النظام ومعاييره"></textarea>
        </div>
        <div class="feature-builder">
          <div class="feature-builder-header">
            <h3>إضافة ميزة</h3>
            <p>أضف تفاصيل الميزة مع الحد الأعلى للزيادة والخصم</p>
          </div>
          <div class="feature-inputs">
            <div class="form-group">
              <label for="featureTitleInput">عنوان الميزة</label>
              <input type="text" id="featureTitleInput" placeholder="مثال: وضوح الحل">
            </div>
            <div class="form-group">
              <label for="featureDescriptionInput">وصف الميزة</label>
              <input type="text" id="featureDescriptionInput" placeholder="تفاصيل قصيرة عن الميزة">
            </div>
            <div class="form-group">
              <label for="featureBonusInput">الزيادة</label>
              <input type="number" id="featureBonusInput" min="0" placeholder="15">
            </div>
            <div class="form-group">
              <label for="featurePenaltyInput">الخصم</label>
              <input type="number" id="featurePenaltyInput" min="0" placeholder="10">
            </div>
          </div>
          <div class="builder-actions">
            <button type="button" class="primary-button ghost" id="addFeatureButton">إضافة الميزة</button>
          </div>
          <div class="feature-queue" id="featureQueue">
            <div class="empty-state">لم يتم إضافة ميزات بعد</div>
          </div>
        </div>
        <div class="feature-builder penalty-builder">
          <div class="feature-builder-header">
            <h3>إضافة عقوبة</h3>
            <p>حدد سبب العقوبة وقيمتها المخصومة</p>
          </div>
          <div class="feature-inputs">
            <div class="form-group">
              <label for="penaltyReasonInput">سبب العقوبة</label>
              <input type="text" id="penaltyReasonInput" placeholder="مثال: تجاوز الوقت المسموح">
            </div>
            <div class="form-group">
              <label for="penaltyValueInput">قيمة العقوبة</label>
              <input type="number" id="penaltyValueInput" min="0" placeholder="5">
            </div>
          </div>
          <div class="builder-actions">
            <button type="button" class="primary-button ghost" id="addPenaltyButton">إضافة العقوبة</button>
          </div>
          <div class="feature-queue" id="penaltyQueue">
            <div class="empty-state">لم يتم إضافة عقوبات بعد</div>
          </div>
        </div>
        <div class="form-actions">
          <button type="submit" class="primary-button">حفظ النظام</button>
          <button type="button" class="secondary-button" id="resetFormButton">إعادة التعيين</button>
        </div>
      </form>
    </section>
    <section class="panel">
      <div class="system-header">
        <h1 id="systemName">لم يتم تحديد اسم النظام</h1>
        <p id="systemFeature"></p>
        <p id="systemDescription" class="muted">أدخل بيانات النظام عبر النموذج لعرضها هنا.</p>
      </div>
      <section class="grade-range">
        <h2>نطاق الدرجات</h2>
        <div class="grade-box">
          <span>0</span>
          <span id="gradeMax">0</span>
        </div>
      </section>
      <section class="panel-section">
        <h2>ميزات النظام</h2>
        <div class="features-list" id="featureList">
          <div class="empty-state">لم يتم إضافة ميزات بعد</div>
        </div>
      </section>
      <section class="panel-section">
        <h2>العقوبات</h2>
        <div class="features-list" id="penaltyList">
          <div class="empty-state">لم يتم إضافة عقوبات بعد</div>
        </div>
      </section>
    </section>
  </main>
  <script>
    const systemForm = document.getElementById("systemForm");
    const systemNameInput = document.getElementById("systemNameInput");
    const systemFeatureInput = document.getElementById("systemFeatureInput");
    const systemGradeInput = document.getElementById("systemGradeInput");
    const systemDescriptionInput = document.getElementById("systemDescriptionInput");
    const featureTitleInput = document.getElementById("featureTitleInput");
    const featureDescriptionInput = document.getElementById("featureDescriptionInput");
    const featureBonusInput = document.getElementById("featureBonusInput");
    const featurePenaltyInput = document.getElementById("featurePenaltyInput");
    const penaltyReasonInput = document.getElementById("penaltyReasonInput");
    const penaltyValueInput = document.getElementById("penaltyValueInput");
    const addFeatureButton = document.getElementById("addFeatureButton");
    const addPenaltyButton = document.getElementById("addPenaltyButton");
    const featureQueue = document.getElementById("featureQueue");
    const penaltyQueue = document.getElementById("penaltyQueue");
    const resetFormButton = document.getElementById("resetFormButton");
    const systemNameDisplay = document.getElementById("systemName");
    const systemFeatureDisplay = document.getElementById("systemFeature");
    const systemDescriptionDisplay = document.getElementById("systemDescription");
    const gradeMaxDisplay = document.getElementById("gradeMax");
    const featureList = document.getElementById("featureList");
    const penaltyList = document.getElementById("penaltyList");
    const features = [];
    const penalties = [];

    function renderFeatureQueue() {
      featureQueue.innerHTML = "";
      if (!features.length) {
        const empty = document.createElement("div");
        empty.className = "empty-state";
        empty.textContent = "لم يتم إضافة ميزات بعد";
        featureQueue.appendChild(empty);
        return;
      }
      features.forEach((feature, index) => {
        const row = document.createElement("div");
        row.className = "feature-chip";
        row.innerHTML = `
          <div class="chip-info">
            <strong>${feature.title}</strong>
            <span>${feature.description}</span>
          </div>
          <div class="chip-actions">
            <span class="pill bonus">+${feature.bonus}</span>
            <span class="pill penalty">-${feature.penalty}</span>
            <button type="button" class="chip-remove" data-index="${index}">حذف</button>
          </div>
        `;
        featureQueue.appendChild(row);
      });
    }

    function renderPenaltyQueue() {
      penaltyQueue.innerHTML = "";
      if (!penalties.length) {
        const empty = document.createElement("div");
        empty.className = "empty-state";
        empty.textContent = "لم يتم إضافة عقوبات بعد";
        penaltyQueue.appendChild(empty);
        return;
      }
      penalties.forEach((penalty, index) => {
        const row = document.createElement("div");
        row.className = "feature-chip";
        row.innerHTML = `
          <div class="chip-info">
            <strong>${penalty.reason}</strong>
            <span class="muted">-${penalty.value}</span>
          </div>
          <div class="chip-actions">
            <span class="pill penalty">-${penalty.value}</span>
            <button type="button" class="chip-remove" data-index="${index}">حذف</button>
          </div>
        `;
        penaltyQueue.appendChild(row);
      });
    }

    function renderFeatureList() {
      featureList.innerHTML = "";
      if (!features.length) {
        const empty = document.createElement("div");
        empty.className = "empty-state";
        empty.textContent = "لم يتم إضافة ميزات بعد";
        featureList.appendChild(empty);
        return;
      }
      features.forEach(feature => {
        const card = document.createElement("article");
        card.className = "feature-card";
        card.innerHTML = `
          <div class="feature-header"><span>${feature.title}</span></div>
          <p class="feature-body">${feature.description}</p>
          <div class="feature-footer">
            <span class="pill bonus">زيادة +${feature.bonus}</span>
            <span class="pill penalty">خصم -${feature.penalty}</span>
          </div>
        `;
        featureList.appendChild(card);
      });
    }

    function renderPenaltyList() {
      penaltyList.innerHTML = "";
      if (!penalties.length) {
        const empty = document.createElement("div");
        empty.className = "empty-state";
        empty.textContent = "لم يتم إضافة عقوبات بعد";
        penaltyList.appendChild(empty);
        return;
      }
      penalties.forEach(penalty => {
        const card = document.createElement("article");
        card.className = "feature-card";
        card.innerHTML = `
          <div class="feature-header"><span>${penalty.reason}</span></div>
          <div class="feature-footer">
            <span class="pill penalty">خصم -${penalty.value}</span>
          </div>
        `;
        penaltyList.appendChild(card);
      });
    }

    function renderPreview() {
      const nameValue = systemNameInput.value.trim();
      const featureValue = systemFeatureInput.value.trim();
      const descriptionValue = systemDescriptionInput.value.trim();
      const gradeValue = systemGradeInput.value.trim();
      systemNameDisplay.textContent = nameValue || "لم يتم تحديد اسم النظام";
      if (featureValue) {
        systemFeatureDisplay.textContent = `ميزة النظام: ${featureValue}`;
        systemFeatureDisplay.classList.remove("muted");
      } else {
        systemFeatureDisplay.textContent = "";
        systemFeatureDisplay.classList.add("muted");
      }
      if (descriptionValue) {
        systemDescriptionDisplay.textContent = descriptionValue;
        systemDescriptionDisplay.classList.remove("muted");
      } else {
        systemDescriptionDisplay.textContent = "أدخل بيانات النظام عبر النموذج لعرضها هنا.";
        systemDescriptionDisplay.classList.add("muted");
      }
      gradeMaxDisplay.textContent = gradeValue || "0";
      renderFeatureList();
      renderPenaltyList();
    }

    addFeatureButton.addEventListener("click", () => {
      const title = featureTitleInput.value.trim();
      const description = featureDescriptionInput.value.trim();
      const bonus = featureBonusInput.value.trim();
      const penalty = featurePenaltyInput.value.trim();
      if (!title || !description) {
        return;
      }
      const bonusValue = bonus ? Number(bonus) : 0;
      const penaltyValue = penalty ? Number(penalty) : 0;
      features.push({
        title,
        description,
        bonus: bonusValue,
        penalty: penaltyValue
      });
      featureTitleInput.value = "";
      featureDescriptionInput.value = "";
      featureBonusInput.value = "";
      featurePenaltyInput.value = "";
      renderFeatureQueue();
      renderPreview();
    });

    addPenaltyButton.addEventListener("click", () => {
      const reason = penaltyReasonInput.value.trim();
      const value = penaltyValueInput.value.trim();
      if (!reason || value === "") {
        return;
      }
      const penaltyValue = Number(value);
      penalties.push({
        reason,
        value: penaltyValue
      });
      penaltyReasonInput.value = "";
      penaltyValueInput.value = "";
      renderPenaltyQueue();
      renderPreview();
    });

    featureQueue.addEventListener("click", event => {
      const trigger = event.target.closest(".chip-remove");
      if (!trigger) {
        return;
      }
      const index = Number(trigger.dataset.index);
      features.splice(index, 1);
      renderFeatureQueue();
      renderPreview();
    });

    penaltyQueue.addEventListener("click", event => {
      const trigger = event.target.closest(".chip-remove");
      if (!trigger) {
        return;
      }
      const index = Number(trigger.dataset.index);
      penalties.splice(index, 1);
      renderPenaltyQueue();
      renderPreview();
    });

    systemForm.addEventListener("submit", event => {
      event.preventDefault();
      renderPreview();
    });

    resetFormButton.addEventListener("click", () => {
      systemForm.reset();
      features.length = 0;
      penalties.length = 0;
      renderFeatureQueue();
      renderPenaltyQueue();
      renderPreview();
    });

    [systemNameInput, systemFeatureInput, systemGradeInput, systemDescriptionInput].forEach(element => {
      element.addEventListener("input", renderPreview);
    });

    renderFeatureQueue();
    renderPenaltyQueue();
    renderPreview();
  </script>
</body>
</html>
